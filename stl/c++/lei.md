# 类

## 多态

虚函数是多态的基础，其调用方式是动态联编，即程序运行时才决定调用基类函数还是子类函数。

### 多态的方式

有三种：虚函数、函数重载、模板

#### 虚函数（接口）

C++ 接口是使用抽象类来实现的，类中定义纯虚函数，实现该接口的类必须实现每个虚函数

#### 函数重载

#### 模板

#### 不具备多态性质的元素

* 默认参数：不可继承，也不具备多态，其绑定到当前对象接口的默认参数上 
* 静态成员和方法：可以被子类继承，但是不能被重写，无法形成多态

{% tabs %}
{% tab title="例1" %}
```cpp
class A
{
  public:
  A(){ printf(“A”);}
  ~A(){ printf(“~A”);
};
class B:public A
{
  public;
  B(){ printf(“B”);}
  ~B(){ printf(“~B”);}
};
  
int main()
{
  A*c = new B[2];
  delete[] c;
  return 0;
}
```

输出为：ABAB\`~A~A

解析：

删除指向派生类的基类指针时，派生类的析构函数没有被调用，只是调用了基类的析构函数，此时派生类将会导致内存泄漏。解决办法是_**将基类的析构函数声明为虚函数**_，此时在调用析构函数的时候是根据ptr指向的具体类型来调用析构函数，此时会调用派生类的析构函数。
{% endtab %}
{% endtabs %}

