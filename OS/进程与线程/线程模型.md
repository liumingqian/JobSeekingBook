# 线程模型

### 生产者消费者模型

用一个缓冲区保存任务，开启一个或多个线程产生任务放入缓存，一个或多个线程从缓存中取出任务处理，这样可以平衡生产和消费的速度。

### 消息模型

以消息的形式进行线程间数据传输，避免了全局变量的使用，进而避免数据同步错误的隐患。接收到消息后可以自行处理，也可以继续分发。

### Master-Worker模型

开启一个master线程，在master中根据任务具体情况分发给其他worker子线程，由子线程处理任务。worker处理完后把处理结果返回给master。

### 父子进程

系统调用fork的过程分为 

1. 申请pid
2. 复制pcb（浅拷贝）
3. 复制进程主体

fork一次会有两个返回值，返回给父进程的值为子进程的pid，返回给子进程的值为0。- - 父进程的页表直接拷贝给子进程，父子进程共享所有数据空间。子进程会在fork之后的代码开始执行。

* 父子进程堆区数据不共享。栈区数据复制。

僵尸进程：PCB存在而进程主体释放。子进程技术的时候父进程未获得子进程退出码，子进程PCB不得不保存退出码，无法释放

孤儿进程：没有父进程的子进程。会被init接管。

